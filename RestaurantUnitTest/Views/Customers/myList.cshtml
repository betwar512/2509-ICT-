@model IEnumerable<RestaurantUnitTest.Models.Customer>


  
<div id="topHead" style="padding-bottom:50px;">
    
</div>
      <div class="panel panel-default col-lg-7">

          <table class="table table-striped">
              <thead class="panel-heading">
                  <tr>
                      <th>
                          @Html.DisplayNameFor(model => model.PhoneNumber)
                      </th>
                      <th>
                          @Html.DisplayNameFor(model => model.FistName)
                      </th>
                      <th>
                          @Html.DisplayNameFor(model => model.LastName)
                      </th>
                      <th>
                          @Html.DisplayNameFor(model => model.Address)
                      </th>
                      <th>
                          @Html.DisplayNameFor(model => model.CreditCard.CardName)
                      </th>
                      <th></th>
                  </tr>
              </thead>

              <tbody class="panel-body">
                  @foreach (var item in Model)
                  {

                      <tr>
                          <td>
                              @Html.DisplayFor(modelItem => item.PhoneNumber)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.FistName)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.LastName)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.Address)
                          </td>
                          <td>
                              @Html.DisplayFor(modelItem => item.CreditCard.CardName)
                          </td>
                          <td>
                              <button type="button" id="detailBtn" class="btn btn-info" onclick="detailA(@item.Id)">Detail</button>
                              @*@Html.ActionLink("Edit", "Edit", new { id = item.Id })*@

                          </td>
                      </tr>
                  }
              </tbody>
          </table>

        @*
        *search function for finding customer with partialView and Ajax Load
        *Ajax function called : findCustomer()
        *callling findCustomer with passed String : string Phone number
        *@


          @Html.Label("search by phone")
          @Html.TextBox("searchBox")
          <input id="searchBtn" type="button" onclick=findCustomer() value="find Customer" />

          <div id="customers"></div>
          <p>
              @Html.ActionLink("Create New", "Create")
          </p>
          @*
        *Ajax action to send data to controller ,
        * send data : PhoneNumber
        * Return partial view and replace it in div id customer
          *@
          <script>
              function findCustomer() {
                  var searchString = $("#searchBox").val();
                  $.ajax({
                      url: '/Customers/findCustomer',
                      contentType: 'application/html; charset=utf-8',
                      data: { passedString: searchString },
                      type: 'Get',
                      dataType: 'html'
                  })
                  .success(function (result) {

                      $('#customers').html(result);
                  })
                  .error(function (xhr, status) {
                      alert(status);
                  })

              }
          </script>
      </div>



    <div id="detail" class="col-lg-5" style="padding-top:75px;">


    </div>



    @*Ajax to get detail here in col 5 id=detail
        *move this file to seperate script file later
    *@

    <script>
        function detailA(id) {

            $.ajax({
                url: '/Customers/detail',
                contentType: 'application/html; charset=utf-8',
                data: { Id: id },
                type: 'Get',
                dataType: 'html'
            })
            .success(function (result) {

                $('#detail').html(result);
            })
            .error(function (xhr, status) {
                alert(status);
            })

        }
    </script>
